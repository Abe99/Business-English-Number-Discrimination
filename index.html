<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Business English Number Training</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: #ffffff;
      color: #111;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    #app {
      max-width: 600px;
      text-align: center;
    }

    .number {
      font-size: 48px;
      margin: 30px 0;
    }

    .spelling {
      font-size: 44px; /* +100% */
      margin-top: 25px;
      color: #000;
    }

    .instruction {
      font-size: 16px;
      color: #555;
      margin-top: 20px;
    }

    button {
      font-size: 18px;
      padding: 10px 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="app">
    <h1>Business English Number Training</h1>
    <p>
      You will see a number.<br>
      Pronounce it out loud.<br>
      Press <strong>Enter</strong> to check.<br>
      Press <strong>Enter</strong> again to continue.
    </p>
    <button id="startBtn">Start Training</button>
    <div class="instruction">Press Enter to start</div>
  </div>

  <script>
    const app = document.getElementById("app");
    const startBtn = document.getElementById("startBtn");

    let levels = [];
    let currentLevel = 0;
    let currentIndex = 0;
    let showingAnswer = false;
    let started = false;

    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateLevels() {
      levels = [];

      const digitRanges = [
        [10, 99],
        [100, 999],
        [1000, 9999],
        [10000, 99999],
        [100000, 999999],
        [1000000, 9999999]
      ];

      digitRanges.forEach(range => {
        const items = [];
        for (let i = 0; i < 100; i++) {
          items.push(randomInt(range[0], range[1]));
        }
        levels.push({ type: "cardinal", items });
      });

      levels.push({
        type: "decimal",
        items: Array.from({ length: 100 }, () =>
          (Math.random() * 100).toFixed(2)
        )
      });

      levels.push({
        type: "percentage",
        items: Array.from({ length: 100 }, () =>
          (Math.random() * 100).toFixed(1) + "%"
        )
      });

      levels.push({
        type: "date",
        items: Array.from({ length: 100 }, () => {
          const day = randomInt(1, 28);
          const month = randomInt(1, 12);
          const year = randomInt(2024, 2030);
          return `${day.toString().padStart(2, "0")}/${month
            .toString()
            .padStart(2, "0")}/${year}`;
        })
      });
    }

    function showItem() {
      const value = levels[currentLevel].items[currentIndex];
      app.innerHTML = `
        <div class="number">${value}</div>
        <div class="instruction">Pronounce the number out loud, then press Enter.</div>
      `;
      showingAnswer = false;
    }

    function showAnswer() {
      const value = levels[currentLevel].items[currentIndex];
      const spelling = spellOut(value, levels[currentLevel].type);

      app.innerHTML = `
        <div class="number">${value}</div>
        <div class="spelling">${spelling}</div>
        <div class="instruction">Press Enter to continue.</div>
      `;
      showingAnswer = true;
    }

    function nextItem() {
      currentIndex++;
      if (currentIndex >= 10) {
        currentLevel++;
        currentIndex = 0;

        if (currentLevel >= levels.length) {
          app.innerHTML = `<h2>Training complete.</h2>`;
          document.removeEventListener("keydown", handleKey);
          return;
        }
      }
      showItem();
    }

    function handleKey(e) {
      if (e.key !== "Enter") return;

      if (!started) {
        startTraining();
        return;
      }

      if (!showingAnswer) showAnswer();
      else nextItem();
    }

    function startTraining() {
      started = true;
      generateLevels();
      currentLevel = 0;
      currentIndex = 0;
      showItem();
    }

    function spellOut(value, type) {
      switch (type) {
        case "decimal": {
          const [whole, frac] = value.split(".");
          return (
            numberToWords(+whole) +
            " point " +
            frac.split("").map(d => numberToWords(+d)).join(" ")
          );
        }

        case "percentage": {
          const num = value.replace("%", "");
          if (num.includes(".")) {
            const [whole, frac] = num.split(".");
            return (
              numberToWords(+whole) +
              " point " +
              frac.split("").map(d => numberToWords(+d)).join(" ") +
              " percent"
            );
          }
          return numberToWords(+num) + " percent";
        }

        case "date": {
          const [d, m, y] = value.split("/");
          return `the ${ordinal(+d)} of ${monthName(+m)}, ${yearSpoken(y)}`;
        }

        default:
          return numberToWords(+value);
      }
    }

    function numberToWords(num) {
      const ones = [
        "zero","one","two","three","four","five","six","seven","eight","nine",
        "ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen",
        "seventeen","eighteen","nineteen"
      ];

      const tens = [
        "","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"
      ];

      if (num < 20) return ones[num];
      if (num < 100) {
        const t = Math.floor(num / 10);
        const r = num % 10;
        return r === 0 ? tens[t] : `${tens[t]} ${ones[r]}`;
      }
      if (num < 1000) {
        const h = Math.floor(num / 100);
        const r = num % 100;
        return r === 0
          ? `${ones[h]} hundred`
          : `${ones[h]} hundred ${numberToWords(r)}`;
      }
      if (num < 1_000_000) {
        const t = Math.floor(num / 1000);
        const r = num % 1000;
        return r === 0
          ? `${numberToWords(t)} thousand`
          : `${numberToWords(t)} thousand ${numberToWords(r)}`;
      }
      const m = Math.floor(num / 1_000_000);
      const r = num % 1_000_000;
      return r === 0
        ? `${numberToWords(m)} million`
        : `${numberToWords(m)} million ${numberToWords(r)}`;
    }

    function ordinal(n) {
      const ordinals = [
        "first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth",
        "eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth",
        "eighteenth","nineteenth","twentieth","twenty-first","twenty-second","twenty-third",
        "twenty-fourth","twenty-fifth","twenty-sixth","twenty-seventh","twenty-eighth"
      ];
      return ordinals[n - 1];
    }

    function monthName(m) {
      return [
        "January","February","March","April","May","June",
        "July","August","September","October","November","December"
      ][m - 1];
    }

    function yearSpoken(y) {
      return y.slice(0, 2) + " " + y.slice(2);
    }

    startBtn.addEventListener("click", startTraining);
    document.addEventListener("keydown", handleKey);
  </script>
</body>
</html>
